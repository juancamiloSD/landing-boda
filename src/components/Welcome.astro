---
import { getImage } from 'astro:assets';

import '../assets/style.css';
import '../assets/main.css';
import Contador from '../components/Count.svelte';
import Carrusel from '../components/Carrusel.astro';
import icon1 from '../assets/images/icon1.png';
import icon2 from '../assets/images/icon2.png';
import icon3 from '../assets/images/icon3.png';
import icon4 from '../assets/images/icon4.png';
import icon5 from '../assets/images/icon5.png';

import imagenCover from '../assets/images/img_cover.png';

import img1_cover_1 from '../assets/images/bg1.jpg';
import img1_cover_2 from '../assets/images/bg3.jpg';

import img2_cover from '../assets/images/img2.jpg';
import img3_cover from '../assets/images/img3.jpg';
import img4_cover from '../assets/images/img4.jpg';
import img5_cover from '../assets/images/img5.jpg';
import flor1 from '../assets/images/flor1.png';
import flor2 from '../assets/images/flor2.png';

import logo from '../assets/images/logo-w.png';

// import section2_img1 from '../assets/images/section2_img1.png';
// import section2_img2 from '../assets/images/section2_img2.png';
// import prometo from '../assets/images/prometo.mp3';
const icon3_ = await getImage({ src: icon3 })
const icon4_ = await getImage({ src: icon4 })
const icon5_ = await getImage({ src: icon5 })

const bgImage_1 = await getImage({ src: img1_cover_1 });
const bgImage_2 = await getImage({ src: img1_cover_2 });

const bgImage2 = await getImage({ src: img2_cover });
const bgImage3 = await getImage({ src: img3_cover });
const bgImage4 = await getImage({ src: img4_cover });
const bgImage5 = await getImage({ src: img5_cover });
const us_ = await getImage({ src: imagenCover });

const flor_1 = await getImage({ src: flor1 });
const flor_2 = await getImage({ src: flor2 });

const logo_ = await getImage({ src: logo });

const tituloEvento = "Boda de Juan & Diana";
const fechaInicio = "2025-09-27T15:30:00";
const fechaFin = "2025-09-28T01:00:00";
const zonaHoraria = "America/Bogota";
const descripcionEvento = "¡Celebra con nosotros el día más importante de nuestras vidas! No olvides confirmar tu asistencia.";
const ubicacionEvento = "Casa Borinquen, Sector Piedragrande, Vía Puerto Tejada, Cali, Valle del Cauca";

// --- Formateo de fechas para los enlaces (formato UTC sin guiones ni dos puntos) ---
const formatoFechaUTC = (fecha: any) => new Date(fecha).toISOString().replace(/[-:]|\.\d{3}/g, '');

const googleFecha = `${formatoFechaUTC(fechaInicio)}/${formatoFechaUTC(fechaFin)}`;

// --- Generación de los enlaces ---
const googleLink = `https://www.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(tituloEvento)}&dates=${googleFecha}&details=${encodeURIComponent(descripcionEvento)}&location=${encodeURIComponent(ubicacionEvento)}&ctz=${zonaHoraria}`;
---

<section class="main">
	<div class="section1_container flex text-center justify-center bg-cover bg-center snap-section relative h-200 md:h-250 !pt-[7rem] !pb-[7rem]" style={`background-image: url(${bgImage_2.src});`}>
		<img src={flor_2.src} alt="flor 2" class="absolute top-[-28%] md:top-[-50%] right-0 z-1" data-aos="fade-up"/>
		<div class="flex flex-col items-center justify-center">
			<div class="rounded-full !w-[15%] md:!w-[8%]" style="background:#BBA15D" data-aos="fade-up">
				<img src={logo_.src} class="p-3" alt="logo"/>
			</div>
			<h1 class="krul green text-center !text-6xl md:!text-8xl pb-4 !mt-[3rem]" data-aos="fade-up">Juan & Diana</h1>
			<p class="filosofia green text-center pt-[1rem] pb-[3rem] !text-2xl md:!text-5xl" data-aos="fade-up">SEPTIEMBRE 27 DEL 2025</p>
		</div>
		<img src={flor_1.src} alt="flor 1" class="absolute bottom-[-10%] md:bottom-[-30%] left-0 z-1 !w-[80%] md:!w-[50%]" data-aos="fade-down"/>
	</div>
	<div class="section2_container flex items-center justify-center snap-section h-150 md:h-250 !pt-[2rem] !pb-[7rem] relative" style={`background-image: url(${bgImage_2.src});`}>
		<img src={us_.src} alt="us" class="!w-[70%] md:!w-[30%]" data-aos="fade-up"/>
	</div>
	<div class="section3_container flex flex-col items-center justify-center snap-section !pt-[10rem] !pb-[8rem] md:!pt-[18rem] md:!pb-[7rem] relative" style={`background-image: url(${bgImage_2.src});`}>
		<img src={flor_2.src} alt="flor 2" class="absolute top-[-20%] md:top-[-30%] right-0 z-1 !w-[80%] md:!w-[50%]" data-aos="fade-up"/>
		<h2 class="pari !text-3xl md:!text-6xl pb-[2rem]" data-aos="fade-up">¡Nos casamos!</h2>
		<p class="questa green text-center !text-base md:!text-2xl pb-[2rem]" data-aos="fade-up">Nuestra historia comenzó cuando apenas aprendíamos a soñar, crecimos juntos, 
			fuimos testigos de cada una de las etapas de nuestras vidas y hace 17 años nuestras almas han caminado juntas. Soñamos con un día lleno de amor, 
			alegría y la certeza de que este lazo, que nació en la adolescencia, seguirá creciendo con cada amanecer, celebrando que nuestro amor de siempre se 
			transformará en un “Para Siempre”.</p>
		<p class="questa green text-center !text-base md:!text-2xl pb-[2rem]" data-aos="fade-up">
			Hoy, después de tantos capítulos escritos, queremos celebrar el inicio del más importante: <strong>Unir nuestras vidas en matrimonio con la bendición de Dios</strong> y 
			queremos compartir esta alegría con quienes más amamos y han sido parte de nuestra historia.
		</p>	
		<h2 class="pari !mb-5 !text-lg md:!text-3xl pb-[2rem]" data-aos="fade-up">¡Te esperamos!</h2>
		<div class="rounded-full !w-[15%] md:!w-[5%]" style="background:#BBA15D" data-aos="fade-up">
			<img src={logo_.src} class="p-3" alt="logo"/>
		</div>
		<img src={flor_1.src} alt="flor 1" class="absolute bottom-[-25%] md:bottom-[-40%] left-0 z-1 !w-[80%] md:!w-[40%]" data-aos="fade-up"/>
	</div>
	<div class="section4_container flex items-center justify-center h-140 md:h-250 snap-section relative">
		<div class="flex flex-col items-center justify-center">
			<div class="col-12 col-md-8 offset-md-2">
				<div data-aos="fade-up">
					<div id="contador">
						<Contador client:load />
					</div>
				</div>
				<div class="text-center" data-aos="fade-up">
					<p class="filosofia !text-4xl md:!text-6xl !text-green-900">27 DE SEPTIEMBRE 2025</p>
				</div>
				<div class="text-center my-8">
					<a 
						href={googleLink} 
						target="_blank" 
						class="internalPage" 
					>
						Añadir a mi calendario
					</a>
				</div>
			</div>
		</div>
	</div>
	<div class="section5_container flex flex-col items-center justify-center p-5 md:p-8 snap-section h-240 md:h-250 relative" style={`background-image: url(${bgImage_2.src});`}>
		<img src={flor_2.src} alt="flor 2" class="absolute top-[-15%] md:top-[-40%] right-0 z-1 !w-[80%] md:!w-[40%]" data-aos="fade-up"/>
		<div class="flex flex-col gap-8 lg:gap-12 max-w-4xl w-full">
			<div 
				class="card flex flex-1 flex-col items-center justify-start text-center bg-white/10 backdrop-blur-sm !px-8 !py-[4rem] rounded-xl border border-white/20"
				data-aos="fade-up" data-aos-anchor-placement="top-bottom"
			>
				<h2 class="krul !text-4xl md:!text-7xl !mb-[5rem]" data-aos="fade-up">Ceremonia y Recepción</h2>
				<img class="mb-4 w-[10rem] " src={icon5_.src} alt="icon ceremonia" data-aos="fade-up"/>
				<h4 class="filosofia text-5xl font-semibold" data-aos="fade-up">CASA BORINQUEN</h4>
				
				<div class="list flex flex-col my-4 gap-1">
					<span class="questa dir" data-aos="fade-up">Casa, campestre, Sector Piedragrande</span>
					<span class="questa dir" data-aos="fade-up">Vía Puerto Tejada</span>
					<span class="questa dir" data-aos="fade-up">Cali, Valle del Cauca</span>
					<span class="questa date font-bold mt-2" data-aos="fade-up">3:30 P.M.</span>
				</div>
				
				<div class="mt-auto" data-aos="fade-up">
					<a 
						class="questa text-lg inline-block border-b border-transparent hover:border-current transition-all" 
						href="https://maps.app.goo.gl/1QGEw8jfaj27kS2F6" target="_blank">
						Cómo llegar
					</a>
				</div>
			</div>
		</div>
		<img src={flor_1.src} alt="flor 1" class="absolute bottom-[-10%] md:bottom-[-30%] left-0 z-1 !w-[80%] md:!w-[40%]" data-aos="fade-up"/>
	</div>
	<div class="section6_container p-4 md:p-8 h-220 md:h-220  relative" style={`background-image: url(${bgImage_2.src});box-shadow: 0 20px 20px 0px  rgba(72,120,115,.2);`}>
		<div class="container mx-auto px-4">
			<div class="gallery w-full overflow-hidden">
				<Carrusel />
			</div>
		</div>
	</div>
	<div class="py-[5rem] flex flex-col items-center justify-center bg-[#E4E4E4]">
		<p class="questa !text-base md:!text-2xl text-[#487873] !w-[80%] md:!w-[40%] text-center" data-aos="fade-down">
			"Somos un lazo de tres hilos: dos corazones que se aman y un Dios que nos sostiene. Y un lazo así, bendecido por Él, jamás se romperá."
		</p>
	</div>
	<div class="section7_container flex items-center justify-center snap-section !pt-[10rem] !pb-[5rem] p-4 md:p-8 relative" style={`background-image: url(${bgImage_2.src});box-shadow: 0 -20px 20px 0px rgba(72,120,115,.2);`}>
		<img src={flor_2.src} alt="flor 2" class="absolute top-[-15%] md:top-[-20%] right-0 z-1 !w-[80%] md:!w-[40%]" data-aos="fade-up"/>
		<div 
			class="card max-w-4xl flex flex-col items-center justify-start text-center bg-white/10 backdrop-blur-sm !px-8 !py-[4rem] rounded-xl border border-white/20"
			data-aos="fade-up" data-aos-anchor-placement="top-bottom"
		>
			<h2 class="krul pb-[4rem]" data-aos="fade-up">Dress Code</h2>
			<img src={icon3_.src} class="w-[10rem]" alt="icono dress code" data-aos="fade-up"/>
			<p class="pari pt-[2rem] text-[#487873] text-3xl font-extrabold pb-4" data-aos="fade-up">Summer Formal</p>
			<p class="questa !text-base md:!text-xl text-[#487873]" data-aos="fade-up">Dado que la ceremonia será al aire libre, en un entorno campestre y cálido, y la recepción se extenderá hasta altas horas de la noche, 
				el dress code tendrá equilibrio entre elegancia, frescura y comodidad.</p>
			<div class="reserved text-center pt-4" data-aos="fade-up">
				<p class="questa text-2xl" data-aos="fade-up"><b>Mujeres:</b> Evitar el color blanco y rojo</p>
				<p class="questa text-2xl" data-aos="fade-up"><b>Hombres:</b> Evitar el traje azul</p>
			</div>
			<div class="mt-auto pt-[3rem]" data-aos="fade-up">
				<a href="/dresscode" class="questa internalPage text-lg inline-block border-b border-transparent hover:border-current transition-all">
					Ver referencias
				</a>
			</div>
		</div>
		<img src={flor_1.src} alt="flor 1" class="absolute bottom-[-15%] md:bottom-[-40%] left-0 z-1 !w-[80%] md:!w-[40%]" data-aos="fade-up"/>
	</div>
	<div class="section8_container flex flex-col items-center justify-center h-120 md:h-250 snap-section relative">
		<img class="!mb-[3rem] !w-[80%] md:!w-[15%]" src={icon4_.src} alt="icono lluvia de sobres" data-aos="fade-up" data-aos-anchor-placement="top-up"/>
		<div class="sobres flex flex-col items-center justify-center" data-aos="fade-up" data-aos-anchor-placement="top-bottom">
			<span class="questa !text-green-900">Lluvia de sobres</span>
			<p class="questa !text-xl md:!text-2xl pt-[3rem] !w-[80%] md:!w-[40%] text-center text-[#487873]">"Lo único obligatorio es que vengas a celebrar. Aceptamos abrazos, risas y bailes, pero si además quieres dejarnos un sobrecito, 
				prometemos convertirlo en aventuras y futuros antojos de pizza en pareja."</p>
		</div>
		<img src={flor_2.src} alt="flor 2" class="absolute bottom-[-50%] md:bottom-[-50%] right-0 z-1 !w-[80%] md:!w-[40%]" data-aos="fade-up"/>
	</div>
	<div class="section9_container flex items-center justify-center h-200 md:h-250 snap-section !pt-[15rem] overflow-hidden relative" style={`background-image: url(${bgImage_2.src});`}>
		<div class="text-center">
			<h2 class="krul !pb-[3rem]" data-aos="fade-up" data-aos-anchor-placement="top-bottom">Confirmar asistencia</h2>
			<div data-aos="fade-up" data-aos-anchor-placement="top-bottom">
				<p class="pari !text-xl md:!text-xl">Confirma tu asistencia a nuestra Boda</p>
				<p class="pari !text-xl md:!text-xl">antes del 24 de agosto.</p>
				<p class="pari !text-xl md:!text-xl">Da clic en el botón</p>
				<p class="pari !text-xl md:!text-xl">"Confirmar Asistencia"</p>
			</div>
			
			<div class="action" data-aos="fade-up" data-aos-anchor-placement="top-bottom">
				<a href="https://forms.office.com/pages/responsepage.aspx?id=ZS7dCd7WG0a3Hqe5v8uv6CVIgKUiZgxDgF5yOZIaY-5UOE9SU1haN01GWVRGTTI0VUNDU0ZBSVlYUi4u&origin=lprLink" target="_blank" class="questa">
					Confirmar Asistencia <i class="fa-solid fa-arrow-pointer"></i>
				</a>
			</div>
			<div class="action" data-aos="fade-up" data-aos-anchor-placement="top-bottom">
				<a href="https://wa.me/573216149165?text=Hola" target="_blank" class="questa">
					Escríbenos <i class="fa-brands fa-whatsapp"></i>
				</a>
			</div>
			<div class="rounded-full !w-[15%] md:!w-[8%] aos-init aos-animate mx-auto" style="background:#BBA15D" data-aos="fade-up">
				<img src={logo_.src} class="p-3" alt="logo"/>
			</div>
		</div>
		<img src={flor_1.src} alt="flor 2" class="absolute bottom-[-20%] md:bottom-[-40%] left-0 z-1 !w-[80%] md:!w-[40%] overflow-hidden" data-aos="fade-down"/>
	</div>
	
	<!-- <button id="btnReproducir">
			<i class="fa-regular fa-circle-play"></i>
	</button>
	
	<div id="overlay" onclick="startPlayback();habilitarScroll()">
		<button id="btnReproducir" class="animBtn" onclick="habilitarScroll()"><i class="fas fa-play"></i></button>
	</div>

	<audio id="audio" src="../../assets/prometo.mp3" controls loop></audio> -->
</section>
